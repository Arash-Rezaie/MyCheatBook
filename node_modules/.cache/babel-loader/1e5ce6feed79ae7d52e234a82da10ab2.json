{"ast":null,"code":"import { Text } from \"./simple/shape\";\nimport { Circle } from \"./simple/circle\";\nimport { Rectangle } from \"./simple/rectangle\";\nimport { DrawBox } from \"./draw-box\";\nimport { ExtendedHVector, ExtendedLine, ExtendedVector, ExtendedVLine } from \"./extended/extended-line\";\nimport { Node } from \"./extended/node\";\nimport { Caption } from \"./extended/caption\";\nexport class DrawBoxHandler {\n  constructor() {\n    this.METHOD_POINTERS = {\n      text: () => new Text(),\n      circle: () => new Circle(),\n      line: () => new ExtendedLine(this),\n      rect: () => new Rectangle(),\n      node: () => new Node(this),\n      cap: () => new Caption(this),\n      hline: () => new ExtendedLine(this),\n      vline: () => new ExtendedVLine(this),\n      vect: () => new ExtendedVector(this),\n      hvect: () => new ExtendedHVector(this),\n      label: (d, o) => o.setLabel(d),\n      color: (d, o) => o.setColor(d),\n      fillColor: (d, o) => o.setFillColor(d),\n      strokeColor: (d, o) => o.setStrokeColor(d),\n      strokeWidth: (d, o) => o.setStrokeWidth(d),\n      strokeStyle: (d, o) => o.setStrokeStyle(d),\n      radius: (d, o) => o.setRadius(d),\n      fontSize: (d, o) => o.setFontSize(d),\n      fontStyle: (d, o) => o.setFontStyle(d),\n      s: (d, o) => o.setStart(d),\n      e: (d, o) => o.setEnd(d),\n      q: (d, o) => o.setQuadraticPoint(d),\n      arrow: (d, o) => o.showArrow(d[0], d[1]),\n      len: (d, o) => o.setLength(d),\n      between: (d, o) => o.between(d[0], d[1], d[2]),\n      width: (d, o) => o.setWidth(d),\n      height: (d, o) => o.setHeight(d),\n      conn: (d, o) => o.connectTo(d),\n      captions: (d, o) => o.setCaptions(d)\n    };\n    this.drawBox = new DrawBox();\n    this.container = {};\n  }\n  /**\n   * @param itemConf it is an object with fields:<br/>\n   * {\n   *    shape: ['text', 'circle', 'line', 'rect', 'node', 'cap', 'hline', 'vline', 'vect', 'hvect']<br/>\n   *\n   *    --- generic ------<br/>\n   *    id: string<br/>\n   *    pos: [x, y]<br/>\n   *    align: shape<br/>\n   *    offset: [dx, dy]<br/>\n   *    label: [string, Text-object<br/>\n   *    color: ['green', 'blue', 'red', 'yellow', 'purple', 'brown', 'orange', 'pink'], (set fill & stroke together)<br/>\n   *    fillColor: color<br/>\n   *    strokeColor: color<br/>\n   *    strokeWidth: int<br/>\n   *    strokeStyle: [int, int], (make stroke dashed)<br/>\n   *\n   *    --- circle ------<br/>\n   *    radius: int<br/>\n   *\n   *    --- Text ------<br/>\n   *    fontSize: value, (ex. '20px' or '12em'<br/>\n   *    fontStyle: ['bold', 'italic', 'bold italic'<br/>\n   *\n   *    --- all line types ------<br/>\n   *    s,e,q: [x,y] or [intR, length] or [intD, length]<br/>\n   *    arrow: [dir([true, false]), places([0 - 1])]<br/>\n   *    between: [id1, id2, gap]<br/>\n   *\n   *    --- hline & vline & hvect ------<br/>\n   *    len: int<br/>\n   *\n   *    --- rectangle ------<br/>\n   *    width: int<br/>\n   *    height: int<br/>\n   *\n   *    --- node & cap ------<br/>\n   *    conn: ref-id. (connect to the aligned shape)<br/>\n   *    captions: [{t:string, c: 'color string', w:width, offset:[x=0,y=0]}]<br/>\n   * }\n   */\n\n\n  addShape(itemConf) {\n    this.drawBox.addShape(this.generateShape(itemConf));\n    return this;\n  }\n\n  addDirectShape(shape) {\n    this.drawBox.addShape(shape);\n    return this;\n  }\n\n  generateShape(itemConf) {\n    let o = this.METHOD_POINTERS[itemConf.shape](itemConf);\n    this.initShape(itemConf, o);\n    let t;\n\n    for (t in itemConf) {\n      if (t !== 'shape' && t !== 'id' && t !== 'pos' && t !== 'align' && t !== 'offset') {\n        this.METHOD_POINTERS[t](itemConf[t], o);\n      }\n    }\n\n    return o;\n  }\n\n  initShape(conf, o) {\n    if (conf.id) this.container[conf.id] = o;\n    if (conf.pos) o.setPosition(conf.pos);\n    if (conf.align) o.alignTo(this.container[conf.align]);\n\n    if (conf.offset) {\n      o.setOffset(conf.offset);\n    }\n\n    return o;\n  }\n\n  getTargetShape(id) {\n    return this.container[id];\n  }\n\n  render(canvas) {\n    this.drawBox.render(canvas);\n  }\n\n}","map":{"version":3,"sources":["/media/arash/SanDisk/MyCheatBook/src/components/drawbox/draw-box-handler.js"],"names":["Text","Circle","Rectangle","DrawBox","ExtendedHVector","ExtendedLine","ExtendedVector","ExtendedVLine","Node","Caption","DrawBoxHandler","constructor","METHOD_POINTERS","text","circle","line","rect","node","cap","hline","vline","vect","hvect","label","d","o","setLabel","color","setColor","fillColor","setFillColor","strokeColor","setStrokeColor","strokeWidth","setStrokeWidth","strokeStyle","setStrokeStyle","radius","setRadius","fontSize","setFontSize","fontStyle","setFontStyle","s","setStart","e","setEnd","q","setQuadraticPoint","arrow","showArrow","len","setLength","between","width","setWidth","height","setHeight","conn","connectTo","captions","setCaptions","drawBox","container","addShape","itemConf","generateShape","addDirectShape","shape","initShape","t","conf","id","pos","setPosition","align","alignTo","offset","setOffset","getTargetShape","render","canvas"],"mappings":"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","sourcesContent":["import {Text} from \"./simple/shape\";\nimport {Circle} from \"./simple/circle\";\nimport {Rectangle} from \"./simple/rectangle\";\nimport {DrawBox} from \"./draw-box\";\nimport {ExtendedHVector, ExtendedLine, ExtendedVector, ExtendedVLine} from \"./extended/extended-line\";\nimport {Node} from \"./extended/node\";\nimport {Caption} from \"./extended/caption\";\n\nexport class DrawBoxHandler {\n    const\n    METHOD_POINTERS = {\n        text: () => new Text(),\n        circle: () => new Circle(),\n        line: () => new ExtendedLine(this),\n        rect: () => new Rectangle(),\n        node: () => new Node(this),\n        cap: () => new Caption(this),\n        hline: () => new ExtendedLine(this),\n        vline: () => new ExtendedVLine(this),\n        vect: () => new ExtendedVector(this),\n        hvect: () => new ExtendedHVector(this),\n        label: (d, o) => o.setLabel(d),\n        color: (d, o) => o.setColor(d),\n        fillColor: (d, o) => o.setFillColor(d),\n        strokeColor: (d, o) => o.setStrokeColor(d),\n        strokeWidth: (d, o) => o.setStrokeWidth(d),\n        strokeStyle: (d, o) => o.setStrokeStyle(d),\n        radius: (d, o) => o.setRadius(d),\n        fontSize: (d, o) => o.setFontSize(d),\n        fontStyle: (d, o) => o.setFontStyle(d),\n        s:(d, o) => o.setStart(d),\n        e:(d, o) => o.setEnd(d),\n        q:(d, o) => o.setQuadraticPoint(d),\n        arrow: (d, o) => o.showArrow(d[0], d[1]),\n        len: (d, o) => o.setLength(d),\n        between: (d, o) => o.between(d[0], d[1], d[2]),\n        width: (d, o) => o.setWidth(d),\n        height: (d, o) => o.setHeight(d),\n        conn: (d, o) => o.connectTo(d),\n        captions: (d, o) => o.setCaptions(d),\n    };\n\n    constructor() {\n        this.drawBox = new DrawBox();\n        this.container = {};\n    }\n\n    /**\n     * @param itemConf it is an object with fields:<br/>\n     * {\n     *    shape: ['text', 'circle', 'line', 'rect', 'node', 'cap', 'hline', 'vline', 'vect', 'hvect']<br/>\n     *\n     *    --- generic ------<br/>\n     *    id: string<br/>\n     *    pos: [x, y]<br/>\n     *    align: shape<br/>\n     *    offset: [dx, dy]<br/>\n     *    label: [string, Text-object<br/>\n     *    color: ['green', 'blue', 'red', 'yellow', 'purple', 'brown', 'orange', 'pink'], (set fill & stroke together)<br/>\n     *    fillColor: color<br/>\n     *    strokeColor: color<br/>\n     *    strokeWidth: int<br/>\n     *    strokeStyle: [int, int], (make stroke dashed)<br/>\n     *\n     *    --- circle ------<br/>\n     *    radius: int<br/>\n     *\n     *    --- Text ------<br/>\n     *    fontSize: value, (ex. '20px' or '12em'<br/>\n     *    fontStyle: ['bold', 'italic', 'bold italic'<br/>\n     *\n     *    --- all line types ------<br/>\n     *    s,e,q: [x,y] or [intR, length] or [intD, length]<br/>\n     *    arrow: [dir([true, false]), places([0 - 1])]<br/>\n     *    between: [id1, id2, gap]<br/>\n     *\n     *    --- hline & vline & hvect ------<br/>\n     *    len: int<br/>\n     *\n     *    --- rectangle ------<br/>\n     *    width: int<br/>\n     *    height: int<br/>\n     *\n     *    --- node & cap ------<br/>\n     *    conn: ref-id. (connect to the aligned shape)<br/>\n     *    captions: [{t:string, c: 'color string', w:width, offset:[x=0,y=0]}]<br/>\n     * }\n     */\n    addShape(itemConf) {\n        this.drawBox.addShape(this.generateShape(itemConf));\n        return this;\n    }\n\n    addDirectShape(shape) {\n        this.drawBox.addShape(shape);\n        return this;\n    }\n\n    generateShape(itemConf) {\n        let o = this.METHOD_POINTERS[itemConf.shape](itemConf);\n        this.initShape(itemConf, o);\n        let t;\n        for (t in itemConf) {\n            if (t !== 'shape' && t !== 'id' && t !== 'pos' && t !== 'align' && t !== 'offset') {\n                this.METHOD_POINTERS[t](itemConf[t], o);\n            }\n        }\n        return o;\n    }\n\n    initShape(conf, o) {\n        if (conf.id)\n            this.container[conf.id] = o;\n        if (conf.pos)\n            o.setPosition(conf.pos);\n        if (conf.align)\n            o.alignTo(this.container[conf.align]);\n        if (conf.offset) {\n            o.setOffset(conf.offset);\n        }\n        return o;\n    }\n\n    getTargetShape(id) {\n        return this.container[id];\n    }\n\n    render(canvas) {\n        this.drawBox.render(canvas);\n    }\n}"]},"metadata":{},"sourceType":"module"}