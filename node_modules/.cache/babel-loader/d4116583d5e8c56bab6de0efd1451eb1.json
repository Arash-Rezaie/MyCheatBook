{"ast":null,"code":"import { Shape } from \"./shape\";\nimport { Line } from \"./line\";\nexport class Path extends Shape {\n  constructor() {\n    super();\n    this.points = [];\n    this.setStrokeWidth(1);\n    this.offset2 = [0, 0];\n  }\n  /**\n   * @param point [x,y]\n   */\n\n\n  setStart(point) {\n    this.points[0] = point;\n    return this;\n  }\n  /**\n   * NOTICE TO KEEP AN SPACE BETWEEN EACH INPUT\n   * @param path 'm x y':moveTo(x, y), 'l x y':lineTo(x, y), 'q cx cy x y':quadraticTo(curveX, curveY, x, y), 'o dx dy':offset(x, y)\n   */\n\n\n  path(path) {\n    let arr = path.split('/ +/');\n    let l = path.length;\n\n    for (let i = 0; i < l; i++) {\n      if (path[i] === ' ') continue;\n\n      if (path[i] === 'm') {}\n    }\n  }\n\n  setOffset2(offset) {\n    this.offset2 = [offset[0], offset[1]];\n    return this;\n  }\n  /**\n   * @param point [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n   */\n\n\n  lineTo(point) {\n    this.points.push(new Line().setEnd(point));\n    return this;\n  }\n  /**\n   * @param curve [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n   * @param end [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n   */\n\n\n  quadraticTo(curve, end) {\n    this.points.push(new Line().setQuadraticPoint(curve).setEnd(end));\n    return this;\n  }\n  /**\n   * show arrows on the line\n   * @param direction 0 or 1\n   * @param places array of float values, each is 0 - 1;\n   * @return Shape\n   */\n\n\n  showArrow(direction, places) {\n    this.direction = direction;\n    this.places = typeof places === 'number' ? [places] : places;\n    return this;\n  }\n\n  render(canvasCtx) {\n    this.prepareLines();\n\n    for (let i = 1; i < this.points.length; i++) {\n      this.points[i].render(canvasCtx);\n    }\n  }\n\n  prepareLines() {\n    let lengths = [0]; // extract each line length to determine exact place of arrow\n    //prepare lines. connect lines to each other\n\n    this.points[1].setOffset(this.offset);\n    this.points[this.points.length - 1].setOffset2(this.offset2);\n    this.points[1].setStart(this.points[0]);\n    this.initLine(this.points[1]);\n    lengths.push(this.points[1].getLength());\n\n    for (let i = 2; i < this.points.length; i++) {\n      this.points[i].setStart(this.points[i - 1].getEnd());\n      this.initLine(this.points[i]);\n      lengths.push(lengths[i - 1] + this.points[i].getLength());\n    } //deter mine arrow position\n\n\n    if (this.places != null && this.places.length > 0) {\n      let repo = this.getDistributedArrowPlaces(lengths);\n\n      for (let k in repo) {\n        this.points[repo[k].key + 1].showArrow(this.direction, repo[k].items);\n      }\n    }\n  }\n\n  getDistributedArrowPlaces(lengths) {\n    let max = lengths[lengths.length - 1];\n    let p, temp;\n    let repo = [];\n\n    for (let i = 0; i < this.places.length; i++) {\n      p = this.places[i] * max;\n\n      for (let j = 0; j < lengths.length - 1; j++) {\n        if (p >= lengths[j] && p <= lengths[j + 1]) {\n          temp = this.getRepoObject(repo, j);\n          temp.items.push((p - lengths[j]) / (lengths[j + 1] - lengths[j]));\n          break;\n        }\n      }\n    }\n\n    return repo;\n  }\n\n  getRepoObject(repo, key) {\n    if (repo[key] == null) repo[key] = {\n      key: key,\n      items: [],\n      places: []\n    };\n    return repo[key];\n  }\n\n  initLine(line) {\n    line.setFillColor(this.fillColor);\n    line.setStrokeColor(this.strokeColor);\n    line.setStrokeWidth(this.strokeWidth);\n    line.setStrokeStyle(this.strokeStyle);\n  }\n\n}","map":{"version":3,"sources":["/media/arash/SanDisk/MyCheatBook/src/components/drawbox/simple/path.js"],"names":["Shape","Line","Path","constructor","points","setStrokeWidth","offset2","setStart","point","path","arr","split","l","length","i","setOffset2","offset","lineTo","push","setEnd","quadraticTo","curve","end","setQuadraticPoint","showArrow","direction","places","render","canvasCtx","prepareLines","lengths","setOffset","initLine","getLength","getEnd","repo","getDistributedArrowPlaces","k","key","items","max","p","temp","j","getRepoObject","line","setFillColor","fillColor","setStrokeColor","strokeColor","strokeWidth","setStrokeStyle","strokeStyle"],"mappings":"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","sourcesContent":["import {Shape} from \"./shape\";\nimport {Line} from \"./line\";\n\nexport class Path extends Shape {\n    points = [];\n\n    constructor() {\n        super();\n        this.setStrokeWidth(1);\n        this.offset2 = [0, 0];\n    }\n\n    /**\n     * @param point [x,y]\n     */\n    setStart(point) {\n        this.points[0] = point;\n        return this;\n    }\n\n    /**\n     * NOTICE TO KEEP AN SPACE BETWEEN EACH INPUT\n     * @param path 'm x y':moveTo(x, y), 'l x y':lineTo(x, y), 'q cx cy x y':quadraticTo(curveX, curveY, x, y), 'o dx dy':offset(x, y)\n     */\n    path(path) {\n        let arr=path.split('/ +/')\n        let l = path.length;\n        for (let i = 0; i < l; i++) {\n            if (path[i] === ' ')\n                continue\n            if (path[i] === 'm') {\n\n            }\n        }\n    }\n\n    setOffset2(offset) {\n        this.offset2 = [offset[0], offset[1]];\n        return this;\n    }\n\n    /**\n     * @param point [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n     */\n    lineTo(point) {\n        this.points.push(new Line().setEnd(point));\n        return this;\n    }\n\n    /**\n     * @param curve [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n     * @param end [x,y] or [intR, length] for radian, [intD, length] for degree or [shape,gap].<br/>\n     */\n    quadraticTo(curve, end) {\n        this.points.push(new Line().setQuadraticPoint(curve).setEnd(end));\n        return this;\n    }\n\n    /**\n     * show arrows on the line\n     * @param direction 0 or 1\n     * @param places array of float values, each is 0 - 1;\n     * @return Shape\n     */\n    showArrow(direction, places) {\n        this.direction = direction;\n        this.places = typeof places === 'number' ? [places] : places;\n        return this;\n    }\n\n    render(canvasCtx) {\n        this.prepareLines();\n        for (let i = 1; i < this.points.length; i++) {\n            this.points[i].render(canvasCtx);\n        }\n    }\n\n    prepareLines() {\n        let lengths = [0]; // extract each line length to determine exact place of arrow\n\n        //prepare lines. connect lines to each other\n        this.points[1].setOffset(this.offset);\n        this.points[this.points.length - 1].setOffset2(this.offset2);\n\n        this.points[1].setStart(this.points[0]);\n        this.initLine(this.points[1]);\n        lengths.push(this.points[1].getLength());\n\n        for (let i = 2; i < this.points.length; i++) {\n            this.points[i].setStart(this.points[i - 1].getEnd());\n            this.initLine(this.points[i]);\n            lengths.push(lengths[i - 1] + this.points[i].getLength());\n        }\n\n        //deter mine arrow position\n        if (this.places != null && this.places.length > 0) {\n            let repo = this.getDistributedArrowPlaces(lengths);\n            for (let k in repo) {\n                this.points[repo[k].key + 1].showArrow(this.direction, repo[k].items);\n            }\n        }\n    }\n\n    getDistributedArrowPlaces(lengths) {\n        let max = lengths[lengths.length - 1];\n        let p, temp;\n        let repo = [];\n        for (let i = 0; i < this.places.length; i++) {\n            p = this.places[i] * max;\n            for (let j = 0; j < lengths.length - 1; j++) {\n                if (p >= lengths[j] && p <= lengths[j + 1]) {\n                    temp = this.getRepoObject(repo, j);\n                    temp.items.push((p - lengths[j]) / (lengths[j + 1] - lengths[j]));\n                    break;\n                }\n            }\n        }\n        return repo;\n    }\n\n    getRepoObject(repo, key) {\n        if (repo[key] == null)\n            repo[key] = {key: key, items: [], places: []};\n        return repo[key];\n    }\n\n    initLine(line) {\n        line.setFillColor(this.fillColor);\n        line.setStrokeColor(this.strokeColor);\n        line.setStrokeWidth(this.strokeWidth);\n        line.setStrokeStyle(this.strokeStyle);\n    }\n}"]},"metadata":{},"sourceType":"module"}